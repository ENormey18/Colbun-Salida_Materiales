<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"
>
    <Table
        id="reservasTable"
        items="{Reservas>/ReservaSet}"
        mode="None"
        headerText="Reservas [{= ${Reservas>/ReservaSet}.length}]"
        growing="true"
        growingThreshold="100"
        growingScrollToLoad="false"
        sticky="HeaderToolbar"  
    >
        <headerToolbar >
            <OverflowToolbar
                design="Solid"
                
            >
                <Title text="Reservas [{= ${Reservas>/ReservaSet}.length}]"/>
                <ToolbarSpacer/>
                <SearchField
                    id="tableSearchField"
                    width="30%"
                    placeholder="Filtrar por N° Reserva, Orden, Usuario, Destinatario, Centro..."
                    search="onFiltrarTable"
                />
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column hAlign="Center">
                <Button
                    text="N° Reserva"
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSort"
                    app:sortProperty="Id" 
                />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="false" hAlign="Center">
                 <Button
                    text="Código Mov."
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSort"
                    app:sortProperty="MovCode"
                />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="false">
                <Text text="Orden" />
            </Column>
            <Column minScreenWidth="Tablet" demandPopin="false">
                <Text text="Usuario" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="false" popinDisplay="Inline">
                <Text text="Destinatario" />
            </Column>
            <Column hAlign="Center">
                 <Button
                    text="Estado"
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSort"
                    app:sortProperty="Status"
                />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="false">
                <Text text="Centro de Coste" />
            </Column>
            <Column minScreenWidth="Desktop" demandPopin="false">
                <Text text="Fecha Base" />
            </Column>
            <Column>
                <Button
                    text="Fecha Necesidad"
                    type="Transparent"
                    icon="sap-icon://sort"
                    press="onSort"
                    app:sortProperty="ReqDate"
                />
            </Column>
            <Column minScreenWidth="Tablet" demandPopin="false">
                <Text text="Centro" />
            </Column>
        </columns>
        <items>
            <ColumnListItem
                type="Navigation"
                press=".onItemPress"
            >
                <cells>
                    <ObjectIdentifier
                        title="{Reservas>Id}"
                        titleActive="true"
                        titlePress=".onItemPress"
                    />
                    <Text text="{Reservas>MovCode}" />
                    <Text text="{Reservas>Orden}" />
                    <Text text="{Reservas>Usuario}" />
                    <Text text="{Reservas>Dest}" />
                    <ObjectStatus
                        icon="{
                            path: 'Reservas>Status',
                            formatter: '.formatter.statusIcon'
                        }"
                        text="{
                            path: 'Reservas>Status',
                            formatter: '.formatter.statusText'
                        }"
                        state="{
                            path: 'Reservas>Status',
                            formatter: '.formatter.statusTextState'
                        }"
                    />  
                    <VBox>
                        <Text text="{Reservas>CostCenter}" />
                        <Text text="{Reservas>CostCenterD}" />
                    </VBox>
                    <Text text="{Reservas>BaseDate}" />
                    <Text text="{Reservas>ReqDate}" />
                    <VBox>
                        <Text text="{Reservas>Centro}" />
                        <Text text="{Reservas>CentroD}" />
                    </VBox>
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>
