<core:FragmentDefinition
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:microchart="sap.suite.ui.microchart"
>
    <Table
        id="materialsTable"
        items="{detalleReserva>/FilteredItems}"
        autoPopinMode="true"
        mode="MultiSelect"
        growingThreshold="15"
    >
        <headerToolbar>
            <OverflowToolbar>
                <Title text="Items en Reserva ({detalleReserva>/Reserva/CantItems})" />
                <ToolbarSpacer />
                <SegmentedButton selectedKey="{detalleReserva>/ShowingItems}" selectionChange="onShowItems">
                    <items>
                        <SegmentedButtonItem key="P" text="Pendientes ({detalleReserva>/Reserva/CantItemsP})"/>
                        <SegmentedButtonItem key="C" text="Completados ({detalleReserva>/Reserva/CantItemsC})"/>
                    </items>
                </SegmentedButton>
                <ToolbarSpacer width="50px" />
                <SearchField width="250px" placeholder="Material" search="onSearchMaterial" />
                <ToolbarSeparator />
                <ToolbarSeparator />
                <Button icon="sap-icon://full-screen" />
            </OverflowToolbar>
        </headerToolbar>
        <columns>
            <Column  >
                <Text text="Material" />
            </Column>
            <Column autoPopinWidth="6">
                <Text text="Descripcion" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Pos." />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Centro" />
            </Column>
            <Column autoPopinWidth="6" popinDisplay="WithoutHeader">
                <Text text="Alamacén" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Fecha Nec." />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Ubicación" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Retira" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Pendiente" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="Cantidad" />
            </Column>
            <Column autoPopinWidth="6" >
                <Text text="UMB" />
            </Column>
            <Column autoPopinWidth="6" hAlign="Center" >
                <Text text="% Enriquecimiento" />
            </Column>
            <Column autoPopinWidth="6" hAlign="Center" >
                <Text text="Cant UTs" />
            </Column>
        </columns>
        <items>
            <ColumnListItem>
                <cells>
                    <ObjectIdentifier
                        titleActive="true"
                        title="{
                            path: 'detalleReserva>Material',
                            formatter: '.formatter.removeLeadingZeros'}"
                    />
                    <Text text="{detalleReserva>Descripcion}" />
                    <Text text="{detalleReserva>Pos}" />
                    <Text text="{detalleReserva>Centro} - {detalleReserva>CentroD}" />
                    <Text text="{detalleReserva>Almacen} - {detalleReserva>AlmacenD}" />
                    <Text text="{detalleReserva>FechaNecesidad}" 
                    />
                    <Text text="{detalleReserva>Ubicacion}" />
                    <Input
                        value="{detalleReserva>Retira}"
                        type="Number"
                        enabled="{= ${detalleReserva>CantPendiente} > 0}"
                    />
                    <Text text="{detalleReserva>CantPendiente}" />
                    <Text text="{detalleReserva>CantNecesitada}" />
                    <Text text="{detalleReserva>Unidad}" />   
                    <microchart:RadialMicroChart
                        percentage="{
                            path: 'detalleReserva>Enhancement',
                            formatter: '.formatter.enchancementPercentage' 
                        }"
                        size="XS"
                        valueColor="Sequence7"
                        press=".onOpenCharacteristicsDialog"
                        alignContent="Center"
                    />
                     <Text text="{detalleReserva>CantUT}" />  
                </cells>
            </ColumnListItem>
        </items>
    </Table>
</core:FragmentDefinition>
