<core:FragmentDefinition
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
>
    <Dialog title="Detalles Salida de Materiales">
        <content>
                <VBox class="sapUi-Std-PaddingM sapUiSmallMarginTopBottom">
                    <Label
                        text="Reserva"
                        showColon="true"
                    />
                    <Text text="{detalleReserva>/SalidaMat/Reserva}" />
                    <Label
                        text="Fecha"
                        showColon="true"
                    />
                    <Text text="{detalleReserva>/SalidaMat/Fecha}" />
                    <Label
                        text="Fecha Contabilización"
                        showColon="true"
                    />
                    <Input
                        type="Date"
                        value="{detalleReserva>/SalidaMat/FechaContabilizacion}"
                        width="150px"
                        required="true"
                    />
                    <Label
                        text="Destinatario"
                        showColon="true"
                    />
                    <Input
                            id="input-nombreDestinatario"
                            value="{detalleReserva>/SalidaMat/Destinatario}"
                            showSuggestion="true"
                            suggestionItems="{
                                path: 'detalleReserva>/Receptores'
                            }"
                            width="200px"
                            showValueHelp="true"
                            valueHelpRequest="onReceptoresValueHelp" 
                        >
                            <suggestionItems>
                                <core:ListItem
                                    key="{detalleReserva>Usnam}"
                                    text="{detalleReserva>Nombre}"
                                />
                            </suggestionItems>
                        </Input>
                </VBox>
                <VBox
                    id="salidaMatContentVBox"
                    alignItems="Center"
                    class="sapUi-Std-PaddingM sapUiSmallMarginBottom"
                    justifyContent="Center"
                >
                    <Table
                        headerText="Materiales"
                        id="salidaMatTable"
                        items="{
                            path: 'detalleReserva>/SalidaMat/Materiales'
                        }"
                    >
                        <columns>
                            <Column>
                                <Text text="Posición en Reserva" />
                            </Column>
                            <Column>
                                <Text text="Material" />
                            </Column>
                            <Column>
                                <Text text="Descripción" />
                            </Column>
                            <Column>
                                <Text text="Cantidad" />
                            </Column>
                            <Column>
                                <Text text="Unidad" />
                            </Column>
                        </columns>
                        <items>
                            <ColumnListItem>
                                <cells>
                                    <Text text="{detalleReserva>Pos}" />
                                    <Text text="{path:'detalleReserva>Material', formatter:'.formatter.removeLeadingZeros'}" />
                                    <Text text="{detalleReserva>Descripcion}" />
                                    <Text text="{ path: 'detalleReserva>Retira', formatter: '.formatter.numberDecimals'}" />
                                    <Text text="{detalleReserva>Unidad}" />
                                </cells>
                            </ColumnListItem>
                        </items>
                    </Table>
                </VBox>
        </content>
        <beginButton>
            <Button
                text="OK"
                type="Emphasized"
                press=".onPostSalidaMat"
            />
        </beginButton>
        <endButton>
            <Button
                text="Cancel"
                press=".onCancelarSalidaMat"
            />
        </endButton>
    </Dialog>
</core:FragmentDefinition>
