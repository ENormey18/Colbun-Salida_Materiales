<mvc:View
    controllerName="salidademateriales.controller.Details"
    xmlns:core="sap.ui.core"
    xmlns:uxap="sap.uxap"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
>
    <Page
        title="GestiÃ³n Reservas"
        showNavButton="true"
        navButtonPress=".onNavBack"
    >
        <uxap:ObjectPageLayout showFooter="true">
            <uxap:headerTitle>
                <uxap:ObjectPageDynamicHeaderTitle>
                    <uxap:content>
                        <ObjectIdentifier title="Reserva {detalleReserva>/Reserva/Id}" />
                    </uxap:content>
                </uxap:ObjectPageDynamicHeaderTitle>
            </uxap:headerTitle>
            <uxap:headerContent>
                <core:Fragment
                    fragmentName="salidademateriales.view.fragments.details.HeaderContent"
                    type="XML"
                />
            </uxap:headerContent>
            <uxap:sections>
                <uxap:ObjectPageSection
                    title="Reserva"
                    titleUppercase="false"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection title="Detalles Cabecera">
                            <core:Fragment
                                fragmentName="salidademateriales.view.fragments.details.DetallesSubSection"
                                type="XML"
                            />
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
                <uxap:ObjectPageSection
                    title="Listado Materiales"
                    titleUppercase="false"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection title="Listado de materiales">
                            <core:Fragment
                                fragmentName="salidademateriales.view.fragments.details.ListadoMaterialesSubSection"
                                type="XML"
                            />
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
                <uxap:ObjectPageSection
                    title="Documentos"
                    titleUppercase="false"
                >
                    <uxap:subSections>
                        <uxap:ObjectPageSubSection class="sapUxAPObjectPageSubSectionTransparentBackground">
                            <uxap:blocks>
                                <!-- 1. Usamos HBox para centrar el panel en el espacio disponible -->
                                <HBox
                                    justifyContent="Center"
                                    width="50%"
                                >
                                    <!-- 2. El Panel crea un contenedor con fondo blanco -->
                                    <!-- 3. 'width="auto"' hace que el Panel se ajuste al ancho de su contenido -->
                                    <Panel width="auto">
                                        <content>
                                            <core:Fragment
                                                fragmentName="salidademateriales.view.fragments.details.ListadoDocumentosSubSection"
                                                type="XML"
                                            />
                                        </content>
                                    </Panel>
                                </HBox>
                            </uxap:blocks>
                        </uxap:ObjectPageSubSection>
                    </uxap:subSections>
                </uxap:ObjectPageSection>
            </uxap:sections>
            <uxap:footer>
                <OverflowToolbar>
                    <Button
                        id="messagePopoverButton"
                        visible="{= ${detalleReserva>/Messages}.length > 0}"
                        icon="{
                            path: 'detalleReserva>/Messages',
                            formatter: '.formatter.buttonIconFormatter'
                        }"
                        type="{
                            path: 'detalleReserva>/Messages',
                            formatter: '.formatter.buttonTypeFormatter'
                        }"
                        text="{
                            path: 'detalleReserva>/Messages',
                            formatter: '.formatter.highestSeverityMessages'
                        }"
                        press=".onShowMessagePopover"
                    />
                    <ToolbarSpacer />
                    <Button
                        type="Emphasized"
                        text="Contabilizar"
                        press="onConfirmarSalida"
                    />
                    <Button
                        text="Cancel"
                        press="onLimpiarTabla"
                    />
                </OverflowToolbar>
            </uxap:footer>
        </uxap:ObjectPageLayout>
    </Page>
</mvc:View>
