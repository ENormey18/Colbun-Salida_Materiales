<mvc:View
	controllerName="salidademateriales.controller.PostGoodsIssue"
	xmlns="sap.m"
	xmlns:mvc="sap.ui.core.mvc"
>
	<Page title="Gesti贸n Reservas">
		<content>
			<HBox>
				<VBox class="sapUi-Std-PaddingM sapUiSmallMarginTopBottom">
					<Label
						text="Reserva"
						showColon="true"
					/>
					<Text text="{salidaMateriales>/Reserva}" />
					<Label
						text="Fecha"
						showColon="true"
					/>
					<Text text="{salidaMateriales>/Fecha}" />
				</VBox>
				<VBox class="sapUi-Std-PaddingM sapUiSmallMarginTopBottom">
					<Label
						text="Fecha Contabilizaci贸n"
						showColon="true"
					/>
					<Input
						type="Date"
						value="{salidaMateriales>/FechaContabilizacion}"
						width="150px"
						required="true"
						editable="{= !${salidaMateriales>/Ejecutada}}"
					/>
					<Label
						text="Destinatario"
						showColon="true"
					/>
					<Input
						id="input-destinatario"
						value="{salidaMateriales>/DestinatarioUser}"
						placeholder="Buscar o ingresar un usuario receptor..."
						width="300px"
						maxLength="12"
						editable="{= !${salidaMateriales>/Ejecutada}}"
						showValueHelp="true"
						valueHelpRequest="onDestinatarioValueHelp"
						change="onDestinatarioChange"
					/>
				</VBox>
			</HBox>
			<VBox
				id="salidaMatContentVBox"
				alignItems="Center"
				class="sapUi-Std-PaddingM sapUiSmallMarginBottom"
				justifyContent="Center"
			>
				<Table
					headerText="Materiales"
					id="salidaMatTable"
					items="{
						path: 'salidaMateriales>/Materiales'
					}"
				>
					<columns>
						<Column>
							<Text text="Posici贸n en Reserva" />
						</Column>
						<Column>
							<Text text="Material" />
						</Column>
						<Column>
							<Text text="Descripci贸n" />
						</Column>
						<Column>
							<Text text="Cantidad" />
						</Column>
						<Column>
							<Text text="Unidad" />
						</Column>
					</columns>
					<items>
						<ColumnListItem>
							<cells>
								<Text text="{salidaMateriales>Pos}" />
								<Text text="{
									path: 'salidaMateriales>Material',
									formatter: '.formatter.removeLeadingZeros'
								}" />
								<Text text="{salidaMateriales>Descripcion}" />
								<Text text="{
									path: 'salidaMateriales>Retira',
									formatter: '.formatter.numberDecimals'
								}" />
								<Text text="{salidaMateriales>Unidad}" />
							</cells>
						</ColumnListItem>
					</items>
				</Table>
			</VBox>
		</content>
		<footer>
			<Toolbar>
				<Button
					id="messagePopoverPostButton"
					visible="{= ${salidaMateriales>/Messages}.length > 0}"
					icon="{
						path: 'salidaMateriales>/Messages',
						formatter: '.formatter.buttonIconFormatter'
					}"
					type="{
						path: 'salidaMateriales>/Messages',
						formatter: '.formatter.buttonTypeFormatter'
					}"
					text="{
						path: 'salidaMateriales>/Messages',
						formatter: '.formatter.highestSeverityMessages'
					}"
					press=".onShowMessagePopover"
				/>
				<ToolbarSpacer />
				<Button
					visible="{= !${salidaMateriales>/Ejecutada}}"
					text="Ejecutar"
					type="Emphasized"
					press=".onPostSalidaMat"
				/>
				<Button
					visible="{= !${salidaMateriales>/Ejecutada}}"
					text="Cancelar"
					press=".onNavBack"
				/>
				<Button
					visible="{salidaMateriales>/Ejecutada}"
					text="Volver"
					type="Emphasized"
					press=".onFinished"
				/>
			</Toolbar>
		</footer>
	</Page>
</mvc:View>
